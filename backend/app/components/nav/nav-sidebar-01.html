<!-- Nav Sidebar: fixed vertical sidebar on desktop, fullscreen overlay on mobile. Gallery/portfolio feel. -->
<nav id="site-nav" data-animate="nav-scroll" class="fixed top-0 left-0 z-50">
  <!-- Desktop sidebar -->
  <div class="hidden lg:flex flex-col items-center justify-between w-20 h-screen py-8 border-r border-[var(--color-text)]/5" style="background: rgba(var(--color-bg-rgb), 0.95); backdrop-filter: blur(12px);">
    <a href="#hero" class="flex flex-col items-center gap-1">
      <img src="{{LOGO_URL}}" alt="" class="h-8 w-auto object-contain" loading="lazy">
    </a>
    <div class="flex flex-col items-center gap-6 -rotate-90 origin-center whitespace-nowrap">
      {{NAV_LINKS}}
    </div>
    <div class="text-[10px] text-[var(--color-text-muted)] -rotate-90 whitespace-nowrap tracking-widest uppercase">{{BUSINESS_NAME}}</div>
  </div>
  <!-- Mobile: top bar + fullscreen overlay -->
  <div class="lg:hidden fixed top-0 left-0 right-0 z-50 h-16 flex items-center justify-between px-6" style="background: rgba(var(--color-bg-rgb), 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.06);">
    <a href="#hero" class="flex items-center gap-2">
      <img src="{{LOGO_URL}}" alt="" class="h-7 w-auto object-contain" loading="lazy">
      <span class="font-heading font-bold text-sm text-[var(--color-text)]">{{BUSINESS_NAME}}</span>
    </a>
    <button id="nav-sidebar-toggle" class="relative w-8 h-8 flex items-center justify-center z-[60]" aria-label="Menu">
      <span class="nav-sb-line absolute h-[2px] w-5 rounded-full bg-[var(--color-text)] transition-all duration-300" style="transform: translateY(-4px);"></span>
      <span class="nav-sb-line absolute h-[2px] w-3 rounded-full bg-[var(--color-text)] transition-all duration-300" style="transform: translateY(4px);"></span>
    </button>
  </div>
  <!-- Fullscreen overlay -->
  <div id="nav-sidebar-overlay" class="fixed inset-0 z-[55] flex flex-col items-center justify-center gap-6 px-8 transition-all duration-500 pointer-events-none" style="background: rgba(var(--color-bg-rgb), 0); opacity: 0;">
    {{NAV_LINKS_OVERLAY}}
  </div>
</nav>
<!-- Desktop: push content right to make room for sidebar -->
<style>
  @media (min-width: 1024px) {
    body { padding-left: 5rem; }
  }
</style>
<div class="lg:hidden h-16"></div>
<script>
(function() {
  var toggle = document.getElementById('nav-sidebar-toggle');
  var overlay = document.getElementById('nav-sidebar-overlay');
  var lines = toggle ? toggle.querySelectorAll('.nav-sb-line') : [];
  var open = false;

  function setOpen(state) {
    open = state;
    if (overlay) {
      overlay.style.background = open ? 'rgba(var(--color-bg-rgb), 0.98)' : 'rgba(var(--color-bg-rgb), 0)';
      overlay.style.opacity = open ? '1' : '0';
      overlay.style.pointerEvents = open ? 'auto' : 'none';
    }
    if (lines.length >= 2) {
      lines[0].style.transform = open ? 'rotate(45deg)' : 'translateY(-4px)';
      lines[0].style.width = open ? '1.25rem' : '1.25rem';
      lines[1].style.transform = open ? 'rotate(-45deg)' : 'translateY(4px)';
      lines[1].style.width = open ? '1.25rem' : '0.75rem';
    }
    document.body.style.overflow = open ? 'hidden' : '';
    // Stagger link animation
    var links = overlay ? overlay.querySelectorAll('.nav-overlay-link') : [];
    links.forEach(function(link, i) {
      link.style.transition = 'opacity 0.3s ease ' + (open ? i * 0.06 : 0) + 's, transform 0.3s ease ' + (open ? i * 0.06 : 0) + 's';
      link.style.opacity = open ? '1' : '0';
      link.style.transform = open ? 'translateY(0)' : 'translateY(20px)';
    });
  }

  if (toggle) {
    toggle.addEventListener('click', function() { setOpen(!open); });
  }
  if (overlay) {
    overlay.querySelectorAll('a').forEach(function(a) {
      a.addEventListener('click', function() { setOpen(false); });
    });
  }
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && open) setOpen(false);
  });
})();
</script>
