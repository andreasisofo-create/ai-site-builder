<!-- Services Accordion: numbered expandable service rows with details/summary. Exolax-inspired clean accordion with full-width rows -->
<section id="services" class="py-24 md:py-32 bg-[var(--color-bg)] overflow-hidden relative">

  <!-- Ambient decorative elements -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-0 right-1/3 w-96 h-96 bg-[var(--color-primary)]/4 rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 left-1/4 w-80 h-80 bg-[var(--color-secondary)]/4 rounded-full blur-3xl"></div>
  </div>

  <!-- Subtle grid pattern -->
  <div class="absolute inset-0 opacity-[0.012]" style="background-image: linear-gradient(var(--color-text) 1px, transparent 1px), linear-gradient(90deg, var(--color-text) 1px, transparent 1px); background-size: 80px 80px;"></div>

  <div class="max-w-5xl mx-auto px-6 relative z-10">
    <!-- Header -->
    <div class="text-center mb-16 md:mb-20" data-animate="fade-up">
      <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-[var(--color-primary)]/15 bg-[var(--color-primary)]/5 mb-6">
        <span class="w-1.5 h-1.5 rounded-full bg-[var(--color-primary)] animate-pulse"></span>
        <span class="text-xs font-semibold tracking-widest uppercase text-[var(--color-primary)] font-body">I Nostri Servizi</span>
      </div>
      <h2 class="text-3xl md:text-5xl lg:text-6xl font-bold font-heading text-[var(--color-text)] mb-5" data-animate="text-split" data-split-type="words">{{SERVICES_TITLE}}</h2>
      <p class="text-[var(--color-text-muted)] max-w-2xl mx-auto text-lg font-body" data-animate="blur-slide" data-delay="0.2">{{SERVICES_SUBTITLE}}</p>
    </div>

    <!-- Accordion Services List -->
    <div data-animate="stagger">
      <!-- REPEAT:SERVICES -->
      <div class="stagger-item" data-animate="fade-up">
        <details class="svc-accordion-details group">
          <summary class="flex items-center gap-5 md:gap-8 py-6 md:py-8 cursor-pointer list-none [&::-webkit-details-marker]:hidden select-none rounded-xl px-4 md:px-6 -mx-4 md:-mx-6 transition-all duration-300 hover:bg-[var(--color-bg-alt)]/50">
            <!-- Service number -->
            <div class="flex-shrink-0">
              <span class="text-3xl md:text-5xl font-bold font-heading text-[var(--color-text)]/8 group-hover:text-[var(--color-primary)]/40 group-open:text-[var(--color-primary)] transition-colors duration-300 tabular-nums">
                {{INDEX_PADDED}}
              </span>
            </div>

            <!-- Service icon -->
            <div class="flex-shrink-0 w-12 h-12 md:w-14 md:h-14 rounded-xl bg-[var(--color-bg-alt)] flex items-center justify-center text-2xl md:text-3xl group-hover:bg-[var(--color-primary)]/10 group-open:bg-[var(--color-primary)]/15 transition-colors duration-300 border border-[var(--color-text)]/5">
              {{SERVICE_ICON}}
            </div>

            <!-- Service title -->
            <div class="flex-1 min-w-0">
              <h3 class="text-lg md:text-2xl font-bold font-heading text-[var(--color-text)] group-hover:text-[var(--color-primary)] group-open:text-[var(--color-primary)] transition-colors duration-300">
                {{SERVICE_TITLE}}
              </h3>
            </div>

            <!-- Expand/collapse icon -->
            <div class="flex-shrink-0 w-10 h-10 rounded-full border border-[var(--color-text)]/10 group-hover:border-[var(--color-primary)]/30 group-open:border-[var(--color-primary)]/30 group-open:bg-[var(--color-primary)]/5 flex items-center justify-center transition-all duration-300">
              <svg class="w-5 h-5 text-[var(--color-text-muted)] group-hover:text-[var(--color-primary)] group-open:text-[var(--color-primary)] transition-all duration-300 svc-accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
              </svg>
            </div>
          </summary>

          <!-- Expanded content -->
          <div class="svc-accordion-content overflow-hidden">
            <div class="pl-4 md:pl-6 pb-8 pt-2">
              <div class="ml-[calc(3rem+1.25rem)] md:ml-[calc(5rem+2rem)] pl-[calc(3rem+1.25rem)] md:pl-[calc(3.5rem+2rem)]">
                <div class="relative">
                  <!-- Accent line -->
                  <div class="absolute -left-6 top-0 bottom-0 w-0.5 rounded-full" style="background: linear-gradient(180deg, var(--color-primary), var(--color-secondary));"></div>
                  <!-- Description -->
                  <p class="text-[var(--color-text-muted)] leading-relaxed text-base md:text-lg font-body max-w-2xl">
                    {{SERVICE_DESCRIPTION}}
                  </p>
                  <!-- Learn more link -->
                  <div class="mt-5 inline-flex items-center gap-2 text-[var(--color-primary)] cursor-pointer group/link">
                    <span class="text-sm font-semibold font-body">Scopri di pi&ugrave;</span>
                    <svg class="w-4 h-4 group-hover/link:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </details>

        <!-- Separator -->
        <div class="h-px bg-[var(--color-text)]/6"></div>
      </div>
      <!-- /REPEAT:SERVICES -->
    </div>
  </div>

  <style>
    .svc-accordion-details[open] .svc-accordion-icon {
      transform: rotate(45deg);
    }
    .svc-accordion-content {
      animation: svc-accordion-slide-down 0.4s ease-out;
    }
    @keyframes svc-accordion-slide-down {
      from { opacity: 0; max-height: 0; transform: translateY(-8px); }
      to { opacity: 1; max-height: 300px; transform: translateY(0); }
    }
    .svc-accordion-details summary:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
  </style>
</section>
