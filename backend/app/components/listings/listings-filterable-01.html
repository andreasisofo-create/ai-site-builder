<!-- Listings Filterable: CSS-only tabbed filter with card grid, radio-input filtering, blur-in tabs and stagger entrance -->
<section id="listings" class="py-24 md:py-32 overflow-hidden relative" style="background: var(--color-bg)">

  <!-- Ambient glow -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-0 w-[500px] h-[500px] rounded-full blur-3xl opacity-[0.04]" style="background: var(--color-primary)"></div>
    <div class="absolute bottom-0 right-0 w-[400px] h-[400px] rounded-full blur-3xl opacity-[0.03]" style="background: var(--color-secondary)"></div>
  </div>

  <!-- Subtle grid texture -->
  <div class="absolute inset-0 opacity-[0.012]" style="background-image: radial-gradient(var(--color-text) 1px, transparent 1px); background-size: 28px 28px;"></div>

  <style>
    /* CSS-only tab filtering */
    .listings-filter-radio { display: none; }
    .listings-filter-label {
      cursor: pointer;
      position: relative;
      padding: 0.625rem 1.5rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
      letter-spacing: 0.025em;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      color: var(--color-text-muted);
      border: 1.5px solid transparent;
      background: transparent;
    }
    .listings-filter-label:hover {
      color: var(--color-primary);
      background: color-mix(in srgb, var(--color-primary) 6%, transparent);
    }

    /* Active tab styles */
    #listings-tab-all:checked ~ .listings-filter-bar [for="listings-tab-all"],
    #listings-tab-1:checked ~ .listings-filter-bar [for="listings-tab-1"],
    #listings-tab-2:checked ~ .listings-filter-bar [for="listings-tab-2"],
    #listings-tab-3:checked ~ .listings-filter-bar [for="listings-tab-3"] {
      color: white;
      background: var(--color-primary);
      border-color: var(--color-primary);
      box-shadow: 0 4px 16px color-mix(in srgb, var(--color-primary) 30%, transparent);
    }

    /* Show/hide card groups */
    .listings-group { display: none; }
    #listings-tab-all:checked ~ .listings-grid-wrap .listings-group { display: block; }
    #listings-tab-1:checked ~ .listings-grid-wrap .listings-group[data-tab="1"] { display: block; }
    #listings-tab-2:checked ~ .listings-grid-wrap .listings-group[data-tab="2"] { display: block; }
    #listings-tab-3:checked ~ .listings-grid-wrap .listings-group[data-tab="3"] { display: block; }
  </style>

  <div class="relative max-w-7xl mx-auto px-6 md:px-12 z-10">
    <!-- Section header -->
    <div class="text-center max-w-3xl mx-auto mb-12 md:mb-16">
      <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border mb-6" style="border-color: color-mix(in srgb, var(--color-primary) 15%, transparent); background: color-mix(in srgb, var(--color-primary) 5%, transparent);">
        <span class="w-1.5 h-1.5 rounded-full animate-pulse" style="background: var(--color-primary)"></span>
        <span class="text-xs font-semibold tracking-widest uppercase font-body" style="color: var(--color-primary)">Catalogo</span>
      </div>
      <h2 class="text-3xl md:text-5xl lg:text-6xl font-bold font-heading mb-5" style="color: var(--color-text)" data-animate="text-split" data-split-type="words">{{LISTINGS_TITLE}}</h2>
      <div class="w-12 h-1 rounded-full mx-auto mb-6" style="background: linear-gradient(90deg, var(--color-primary), var(--color-accent, var(--color-secondary)));"></div>
      <p class="text-lg md:text-xl leading-relaxed font-body" style="color: var(--color-text-muted)" data-animate="blur-slide" data-delay="0.2">{{LISTINGS_SUBTITLE}}</p>
    </div>

    <!-- Radio inputs (hidden) -->
    <input type="radio" name="listings-filter" id="listings-tab-all" class="listings-filter-radio" checked>
    <input type="radio" name="listings-filter" id="listings-tab-1" class="listings-filter-radio">
    <input type="radio" name="listings-filter" id="listings-tab-2" class="listings-filter-radio">
    <input type="radio" name="listings-filter" id="listings-tab-3" class="listings-filter-radio">

    <!-- Filter tabs -->
    <div class="listings-filter-bar flex flex-wrap items-center justify-center gap-3 mb-12 md:mb-16" data-animate="blur-in">
      <label for="listings-tab-all" class="listings-filter-label font-body">Tutti</label>
      <label for="listings-tab-1" class="listings-filter-label font-body">{{TAB_1}}</label>
      <label for="listings-tab-2" class="listings-filter-label font-body">{{TAB_2}}</label>
      <label for="listings-tab-3" class="listings-filter-label font-body">{{TAB_3}}</label>
    </div>

    <!-- Cards grid -->
    <div class="listings-grid-wrap">
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8" data-animate="stagger">
        <!-- REPEAT:LISTING_ITEMS -->
        <div class="listings-group stagger-item" data-tab="{{LISTING_TAB}}">
          <div class="group relative rounded-2xl overflow-hidden transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl" style="background: var(--color-bg-alt); box-shadow: 0 4px 24px rgba(0,0,0,0.06);">

            <!-- Image -->
            <div class="relative aspect-[4/3] overflow-hidden">
              <img
                src="{{LISTING_IMAGE}}"
                alt="{{LISTING_TITLE}}"
                class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110"
                loading="lazy"
              >
              <!-- Price badge -->
              <div class="absolute top-4 right-4 z-10">
                <span class="inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-bold font-body text-white shadow-lg backdrop-blur-md" style="background: color-mix(in srgb, var(--color-primary) 85%, black);">
                  {{LISTING_PRICE}}
                </span>
              </div>
              <!-- Gradient overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent pointer-events-none"></div>
            </div>

            <!-- Content -->
            <div class="p-6">
              <h3 class="text-lg font-bold font-heading mb-2 transition-colors duration-300 group-hover:text-[var(--color-primary)]" style="color: var(--color-text)">{{LISTING_TITLE}}</h3>
              <p class="text-sm leading-relaxed mb-4 font-body line-clamp-2" style="color: var(--color-text-muted)">{{LISTING_DESCRIPTION}}</p>

              <!-- Specs row -->
              <div class="flex items-center gap-3 mb-4 text-xs font-medium font-body" style="color: var(--color-text-muted)">
                <span>{{LISTING_SPEC_1}}</span>
                <span class="w-1 h-1 rounded-full" style="background: var(--color-text-muted); opacity: 0.3;"></span>
                <span>{{LISTING_SPEC_2}}</span>
                <span class="w-1 h-1 rounded-full" style="background: var(--color-text-muted); opacity: 0.3;"></span>
                <span>{{LISTING_SPEC_3}}</span>
              </div>

              <!-- CTA -->
              <a href="{{LISTING_URL}}" class="inline-flex items-center gap-2 text-sm font-semibold font-body transition-all duration-300 group-hover:gap-3" style="color: var(--color-primary)">
                Scopri
                <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
              </a>
            </div>

            <!-- Bottom hover accent -->
            <div class="absolute bottom-0 left-0 w-full h-0.5 scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left" style="background: linear-gradient(90deg, var(--color-primary), var(--color-accent, var(--color-secondary)));"></div>
          </div>
        </div>
        <!-- /REPEAT:LISTING_ITEMS -->
      </div>
    </div>
  </div>
</section>